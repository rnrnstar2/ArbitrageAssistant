# CLAUDE.md

## ğŸš¨ æœ€é‡è¦æŒ‡ç¤º

### å“è³ªãƒã‚§ãƒƒã‚¯

**ã‚³ãƒŸãƒƒãƒˆå‰ãƒ»PRä½œæˆå‰ã®ã¿å®Ÿè¡Œ**:
```bash
npm run lint
cd apps/hedge-system && npm run check-types
cd apps/admin && npm run check-types
npm run build  # å¿…è¦ã«å¿œã˜ã¦
```

é€šå¸¸ã®é–‹ç™ºãƒ»ç·¨é›†ã§ã¯å“è³ªãƒã‚§ãƒƒã‚¯ã¯ã‚¹ã‚­ãƒƒãƒ—ã€‚ã‚¨ãƒ©ãƒ¼ãŒæ‡¸å¿µã•ã‚Œã‚‹å ´åˆã®ã¿å®Ÿè¡Œã€‚

### ãƒªãƒªãƒ¼ã‚¹æ‰‹é †
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒªãƒªãƒ¼ã‚¹ã—ã¦ã€ã¨è¨€ã£ãŸå ´åˆï¼š
```bash
npm run release:hedge [patch|minor|major]
```
æ‰‹å‹•ã§ã‚¿ã‚°ä½œæˆç¦æ­¢ï¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè‡ªå‹•åŒ–æ¸ˆã¿ã€‚

### é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
é‡è¦ãªä½œæ¥­å®Œäº†æ™‚ã¯osascriptã§é€šçŸ¥ï¼š
```bash
# å®Œäº†æ™‚
osascript -e 'display notification "ä½œæ¥­å®Œäº†" with title "ArbitrageAssistant" sound name "Glass"'

# ã‚¨ãƒ©ãƒ¼æ™‚  
osascript -e 'display notification "ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ" with title "ArbitrageAssistant" sound name "Basso"'
```

## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬æ“ä½œ
```bash
npm run dev        # å…¨ã‚¢ãƒ—ãƒªé–‹ç™ºã‚µãƒ¼ãƒãƒ¼
npm run build      # å…¨ã‚¢ãƒ—ãƒªãƒ“ãƒ«ãƒ‰
npm run lint       # å…¨Lint
npm run test       # å…¨ãƒ†ã‚¹ãƒˆ
```

### Haconiwaè‡ªå¾‹å®Ÿè¡Œ
```bash
npm run start:haconiwa   # tmuxç’°å¢ƒæ§‹ç¯‰ï¼ˆæ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿è­·ï¼‰
npm run setup:claude     # å…¨ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦Claude Codeè¨­å®šçµ±ä¸€
npm run auto:haconiwa    # Claude Codeèµ·å‹• + è‡ªå¾‹æŒ‡ç¤ºé…ä¿¡
```

**é‡è¦**: æ—¢å­˜Claude Codeã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œå…¨ä¿è­·æ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿

### ã‚¢ãƒ—ãƒªåˆ¥
```bash
# Hedge System (Tauri)
cd apps/hedge-system
npm run tauri:dev    # é–‹ç™º
npm run tauri:build  # ãƒ“ãƒ«ãƒ‰
npm run check-types  # å‹ãƒã‚§ãƒƒã‚¯

# Admin (Web)
cd apps/admin
npm run dev --turbopack  # é–‹ç™º
npm run check-types      # å‹ãƒã‚§ãƒƒã‚¯
```

### Next.jsã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œå¯¾ç­–

UIã®å¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„å ´åˆã®å¯¾å‡¦æ³•ï¼š

```bash
# æ–¹æ³•1: ã‚¯ãƒªãƒ¼ãƒ³ãªé–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd apps/hedge-system
npm run dev:clean  # .nextãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤ã—ã¦èµ·å‹•

# æ–¹æ³•2: ã‚ˆã‚Šå¾¹åº•çš„ãªã‚¯ãƒªãƒ¼ãƒ³èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰
npm run dev:fresh  # .nextã¨node_modules/.cacheã‚’å‰Šé™¤ã—ã¦èµ·å‹•

# æ–¹æ³•3: ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒãƒ¼ãƒ‰ãƒªãƒ­ãƒ¼ãƒ‰
# Mac: Cmd + Shift + R
# Windows/Linux: Ctrl + Shift + R
```

#### é–‹ç™ºåŠ¹ç‡åŒ–ã®ãƒ’ãƒ³ãƒˆ
- UIãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¤‰æ›´æ™‚ã¯`dev:clean`ã‚’ä½¿ç”¨
- å¤§å¹…ãªå¤‰æ›´æ™‚ã¯`dev:fresh`ã‚’ä½¿ç”¨  
- `next.config.js`ã§watchOptionsã‚’è¨­å®šæ¸ˆã¿ï¼ˆ500msã”ã¨ã«ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’æ¤œçŸ¥ï¼‰

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æ§‹æˆ
- **Monorepo**: Turborepo + npm workspaces
- **Apps**: hedge-system (Tauri v0.1.24), admin (Next.js v0.1.0)
- **Packages**: ui, shared-backend (AWS Amplify), configs

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Frontend**: Next.js 15.3.2, React 19, Tailwind CSS v4
- **Backend**: AWS Amplify Gen2 GraphQL
- **Desktop**: Tauri v2, Rust
- **Testing**: Vitest, React Testing Library
- **Quality**: ESLint --max-warnings 0, TypeScript 5.5.4

## ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ãƒ†ã‚¹ãƒˆå¯¾è±¡
- ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- é‡è¦ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†
- å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- AWS Amplifyé€£æº

### ãƒ†ã‚¹ãƒˆé™¤å¤–
- å˜ç´”è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªwrapper
- UIè¦‹ãŸç›®ã®ã¿

### ã‚³ãƒãƒ³ãƒ‰
```bash
npm run test            # å…¨ãƒ†ã‚¹ãƒˆ
npm run test:coverage   # ã‚«ãƒãƒ¬ãƒƒã‚¸
```

## PRä½œæˆæ™‚ã®ãƒ«ãƒ¼ãƒ«

### å¿…é ˆé …ç›®
- å¤‰æ›´å†…å®¹ã®å…·ä½“çš„èª¬æ˜
- æŠ€è¡“çš„è©³ç´°
- UIå¤‰æ›´æ™‚ã¯ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå¿…é ˆ
- æ—¥æœ¬èªã§è¨˜è¼‰

### äº‹å‰ç¢ºèªãŒå¿…è¦ãªå¤‰æ›´
- ä¾å­˜é–¢ä¿‚è¿½åŠ ãƒ»æ›´æ–°
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å¤§å¹…å¤‰æ›´
- AWS Amplifyè¨­å®šå¤‰æ›´
- Tauriè¨­å®šå¤‰æ›´

## ã‚¿ã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ä¸¦åˆ—é–‹ç™º

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
1. **ã‚¿ã‚¹ã‚¯åˆ†å‰²**: æ©Ÿèƒ½åˆ¥ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥ã«åˆ†å‰²ã—ã€markdownãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²
2. **ä¸¦åˆ—å®Ÿè¡ŒæŒ‡ç¤º**: å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®šã€å®Ÿè¡Œå¯¾è±¡æ˜ç¢ºåŒ–ã€å®Œäº†å¾Œå‡¦ç†
3. **åˆ©ç‚¹**: é–¢å¿ƒäº‹ã®åˆ†é›¢ã€ä¸¦åˆ—å®Ÿè¡Œã«ã‚ˆã‚‹åŠ¹ç‡åŒ–ã€å‚è€ƒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æ´»ç”¨ã€ã‚¿ã‚¹ã‚¯ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

**å¿…é ˆãƒ«ãƒ¼ãƒ«**:
- å…¨ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `tasks/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®
- ç›´åˆ—å®Ÿè¡Œ: `task-1.md`, `task-2.md`, `task-3.md`...
- ä¸¦åˆ—å®Ÿè¡Œ: `task-1-1.md`, `task-1-2.md`, `task-1-3.md`...
- å®Œäº†å¾Œã¯ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤

**ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆä¾‹**:
```
tasks/
â”œâ”€â”€ task-1.md        # ç›´åˆ—ã‚¿ã‚¹ã‚¯1
â”œâ”€â”€ task-2-1.md      # ç›´åˆ—ã‚¿ã‚¹ã‚¯2ã®ä¸¦åˆ—ã‚µãƒ–ã‚¿ã‚¹ã‚¯1
â”œâ”€â”€ task-2-2.md      # ç›´åˆ—ã‚¿ã‚¹ã‚¯2ã®ä¸¦åˆ—ã‚µãƒ–ã‚¿ã‚¹ã‚¯2
â”œâ”€â”€ task-3.md        # ç›´åˆ—ã‚¿ã‚¹ã‚¯3
â””â”€â”€ README.md        # å…¨ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
```

### README.mdè¨˜è¼‰å†…å®¹

**å¿…é ˆé …ç›®**:
- å„ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
- ä¸¦åˆ—å®Ÿè¡Œã®æŒ‡ç¤º
- å®Œäº†å¾Œã®å‰Šé™¤æŒ‡ç¤º

**ä¾‹**:
```markdown
# ã‚¿ã‚¹ã‚¯å®Ÿè¡Œæ‰‹é †

## ç›´åˆ—ã‚¿ã‚¹ã‚¯
1. `task-1.md` - WebSocketåŸºç›¤å¾©å…ƒ
2. `task-3.md` - å‹å®šç¾©çµ±åˆï¼ˆtask-2å®Œäº†å¾Œï¼‰

## ä¸¦åˆ—ã‚¿ã‚¹ã‚¯
### ãƒ•ã‚§ãƒ¼ã‚º2 (ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½)
- `task-2-1.md` - Admin UIå¾©å…ƒ
- `task-2-2.md` - Hedge System UIå¾©å…ƒ

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ä¾‹
```bash
# Claude Code ã§ä¸¦åˆ—å®Ÿè¡Œ
"tasks/task-2-1.md ã‚’å®Ÿè¡Œã—ã¦ã€‚å®Œäº†å¾Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤"
"tasks/task-2-2.md ã‚’å®Ÿè¡Œã—ã¦ã€‚å®Œäº†å¾Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤"
```

### å®Ÿè¡Œä¾‹
```bash
# è¤‡æ•°ã‚¿ã‚¹ã‚¯ã®ä¸¦åˆ—æŒ‡ç¤º
"tasks/redundancy-check-index.md, tasks/README.md ã¯å‚è€ƒç¨‹åº¦ã«ã€
ã‚¿ã‚¹ã‚¯ã¯task-12-typescript-types.md ã‚’å®Ÿè¡Œã—ã¦ã€‚
å®Ÿè¡Œæ¸ˆã¿ã®æ™‚ã€ã“ã®ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã€‚"
```

### å‹ãƒã‚§ãƒƒã‚¯ç«¶åˆå¯¾å‡¦
ä¸¦åˆ—ã‚¿ã‚¹ã‚¯å®Ÿè¡Œæ™‚ã€åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¤‡æ•°ã‚¿ã‚¹ã‚¯ãŒç·¨é›†ã™ã‚‹ã¨å‹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã‚ã‚Šã€‚

**å¯¾å‡¦æ³•**:
```bash
# 1. æ®µéšçš„å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰
# - å…¨ã‚¿ã‚¹ã‚¯ã®ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†å®Œäº†å¾Œã«å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ

# 2. ç·Šæ€¥æ™‚ã‚¹ã‚­ãƒƒãƒ—  
npm run lint --no-typescript-check

# 3. ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åˆ¥ãƒã‚§ãƒƒã‚¯
npm run check-types --workspace=apps/admin
```

## å“è³ªåŸºæº–
- ESLint: --max-warnings 0
- TypeScript: strict mode
- Zero warnings policy
- **shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç·¨é›†ç¦æ­¢** - æ¨™æº–ç‰ˆã‚’ä¿¡é ¼ã—ã¦ä½¿ç”¨