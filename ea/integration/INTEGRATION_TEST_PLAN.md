# MT4/MT5çµ±åˆã‚·ã‚¹ãƒ†ãƒ  ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆè¨ˆç”»

## ğŸ“‹ æ¦‚è¦
æœ¬è¨ˆç”»ã¯ã€MT4/MT5çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®MVPãƒªãƒªãƒ¼ã‚¹ã«å‘ã‘ãŸåŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚’å®šç¾©ã—ã¾ã™ã€‚

## ğŸ¯ ãƒ†ã‚¹ãƒˆç›®æ¨™
1. **æ©Ÿèƒ½å®Œå…¨æ€§**: å…¨å–å¼•ãƒ•ãƒ­ãƒ¼ï¼ˆOPEN/CLOSE/TRAILï¼‰ã®å‹•ä½œç¢ºèª
2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·10msä»¥ä¸‹ã€24æ™‚é–“å®‰å®šç¨¼åƒ
3. **ä¿¡é ¼æ€§**: è‡ªå‹•å†æ¥ç¶šã€ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªã®ç¢ºèª
4. **çµ±åˆæ€§**: Hedge System â†” MT5é–“ã®åŒæ–¹å‘é€šä¿¡æ¤œè¨¼

## ğŸ“Š ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³
- WebSocket DLL: 98%å®Œæˆï¼ˆãƒ“ãƒ«ãƒ‰å¾…ã¡ï¼‰
- HedgeSystemConnector.mq5: 95%å®Œæˆï¼ˆãƒˆãƒ¬ãƒ¼ãƒ«æ©Ÿèƒ½æœªå®Ÿè£…ï¼‰
- Hedge Systemå´: åŸºæœ¬æ©Ÿèƒ½ã®ã¿ï¼ˆTrailEngineæœªå®Ÿè£…ï¼‰
- çµ±åˆãƒ†ã‚¹ãƒˆ: 0%ï¼ˆæœªç€æ‰‹ï¼‰

## ğŸ”§ å‰ææ¡ä»¶
1. WebSocket DLLãƒ“ãƒ«ãƒ‰å®Œäº†ï¼ˆwebsocket-engineeræ‹…å½“ï¼‰
2. MT5ãƒ‡ãƒ¢ç’°å¢ƒæº–å‚™å®Œäº†ï¼ˆmt5-connector-specialistæ‹…å½“ï¼‰
3. Hedge Systemé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ç¨¼åƒä¸­

## ğŸ“… ãƒ†ã‚¹ãƒˆãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: å˜ä½“æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆ1é€±ç›®ï¼‰
#### 1.1 DLLåŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ
```mq5
// test/unit/dll_basic_test.mq5
void TestDLLLoad() {
    // DLLãƒ­ãƒ¼ãƒ‰ç¢ºèª
    int result = WSInit();
    assert(result == 1, "DLL load failed");
}

void TestWebSocketConnection() {
    // æ¥ç¶šãƒ†ã‚¹ãƒˆ
    string url = "ws://localhost:8080/ws";
    int connected = WSConnect(url);
    assert(connected == 1, "WebSocket connection failed");
}
```

#### 1.2 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡ãƒ†ã‚¹ãƒˆ
- JSONå½¢å¼ã®é€ä¿¡ãƒ†ã‚¹ãƒˆ
- å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
- ãƒãƒƒãƒ•ã‚¡ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ

### Phase 2: çµ±åˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆ2é€±ç›®ï¼‰
#### 2.1 å–å¼•ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
```mq5
// test/integration/trading_flow_test.mq5
void TestOpenPositionFlow() {
    // 1. OPENã‚³ãƒãƒ³ãƒ‰é€ä¿¡
    SendOpenCommand("USDJPY", "BUY", 1.0);
    
    // 2. OPENEDã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡ç¢ºèª
    string response = WaitForEvent("OPENED", 5000);
    assert(StringFind(response, "mtTicket") != -1);
    
    // 3. MT5ãƒã‚¸ã‚·ãƒ§ãƒ³ç¢ºèª
    int total = PositionsTotal();
    assert(total > 0, "Position not created in MT5");
}
```

#### 2.2 ãƒˆãƒ¬ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- SET_TRAILã‚³ãƒãƒ³ãƒ‰å—ä¿¡
- ä¾¡æ ¼ç›£è¦–ã¨ãƒˆãƒ¬ãƒ¼ãƒ«åˆ¤å®š
- TRAIL_TRIGGEREDã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡

### Phase 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ3é€±ç›®ï¼‰
#### 3.1 ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æ¸¬å®š
```mq5
void TestMessageLatency() {
    ulong start = GetMicrosecondCount();
    SendTestMessage();
    WaitForResponse();
    ulong end = GetMicrosecondCount();
    
    double latency = (end - start) / 1000.0; // ms
    assert(latency < 10.0, "Latency exceeds 10ms");
}
```

#### 3.2 è² è·ãƒ†ã‚¹ãƒˆ
- 100ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’ã®é€ä¿¡
- 24æ™‚é–“é€£ç¶šç¨¼åƒãƒ†ã‚¹ãƒˆ
- ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œè¨¼

### Phase 4: éšœå®³å¾©æ—§ãƒ†ã‚¹ãƒˆï¼ˆ4é€±ç›®ï¼‰
#### 4.1 ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯éšœå®³
- æ¥ç¶šåˆ‡æ–­â†’è‡ªå‹•å†æ¥ç¶š
- ãƒ‘ã‚±ãƒƒãƒˆãƒ­ã‚¹çŠ¶æ³ã§ã®å‹•ä½œ
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†

#### 4.2 ã‚·ã‚¹ãƒ†ãƒ éšœå®³
- Hedge Systemãƒ€ã‚¦ãƒ³â†’å¾©æ—§
- MT5å†èµ·å‹•â†’å†æ¥ç¶š
- DLLã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒªã‚«ãƒãƒª

## ğŸ“Š ãƒ†ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|-----------|--------|----------|
| æ¥ç¶šæˆåŠŸç‡ | 99.9% | 1000å›æ¥ç¶šãƒ†ã‚¹ãƒˆ |
| ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· | < 10ms | å¾€å¾©æ™‚é–“æ¸¬å®š |
| 24æ™‚é–“ç¨¼åƒç‡ | 100% | é€£ç¶šç¨¼åƒãƒ†ã‚¹ãƒˆ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | < 50MB | ã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ç›£è¦– |
| CPUä½¿ç”¨ç‡ | < 5% | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒ¼ |

## ğŸ› ï¸ ãƒ†ã‚¹ãƒˆç’°å¢ƒ

### MT5å´
- MetaTrader 5 Build 3200+
- Windows 10/11 or macOS 12+
- ãƒ‡ãƒ¢å£åº§ï¼ˆFXCM or XMï¼‰

### Hedge Systemå´
- AWS EC2 t3.medium
- WebSocketã‚µãƒ¼ãƒãƒ¼ï¼ˆport 8080ï¼‰
- GraphQL APIï¼ˆAppSyncï¼‰

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º: localhost
- ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°: VPNçµŒç”±
- æœ¬ç•ªæƒ³å®š: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆçµŒç”±

## ğŸ“ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç®¡ç†

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒªãƒã‚¸ãƒˆãƒª
```
ea/test/
â”œâ”€â”€ unit/               # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ dll_basic_test.mq5
â”‚   â””â”€â”€ json_parser_test.mq5
â”œâ”€â”€ integration/        # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ trading_flow_test.mq5
â”‚   â”œâ”€â”€ trail_function_test.mq5
â”‚   â””â”€â”€ error_handling_test.mq5
â””â”€â”€ performance/        # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ latency_test.mq5
    â””â”€â”€ stress_test.mq5
```

### å®Ÿè¡Œæ–¹æ³•
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
./scripts/run-all-tests.sh

# ã‚«ãƒ†ã‚´ãƒªåˆ¥å®Ÿè¡Œ
./scripts/run-tests.sh unit
./scripts/run-tests.sh integration
./scripts/run-tests.sh performance
```

## ğŸš¨ ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| DLLãƒ“ãƒ«ãƒ‰å¤±æ•— | é«˜ | äº‹å‰ã«ãƒ“ãƒ«ãƒ‰ç’°å¢ƒæ¤œè¨¼ |
| MT5 APIå¤‰æ›´ | ä¸­ | æœ€æ–°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ | ä¸­ | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤èª¿æ•´ |
| ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ | é«˜ | Valgrindç­‰ã§æ¤œè¨¼ |

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆ

ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã€ä»¥ä¸‹ã®å½¢å¼ã§ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆï¼š

```markdown
# ãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆ - [æ—¥ä»˜]

## ã‚µãƒãƒªãƒ¼
- ç·ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ•°: XXX
- æˆåŠŸ: XXX (XX%)
- å¤±æ•—: XXX
- ã‚¹ã‚­ãƒƒãƒ—: XXX

## è©³ç´°çµæœ
[å„ãƒ†ã‚¹ãƒˆã®è©³ç´°çµæœ]

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šçµæœ
[ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€CPUã€ãƒ¡ãƒ¢ãƒªç­‰]

## èª²é¡Œã¨æ”¹å–„ææ¡ˆ
[ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œã¨å¯¾ç­–]
```

## ğŸ¯ æˆåŠŸåŸºæº–
1. å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®95%ä»¥ä¸ŠãŒåˆæ ¼
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™ã‚’å…¨ã¦é”æˆ
3. 24æ™‚é–“é€£ç¶šç¨¼åƒãƒ†ã‚¹ãƒˆã«åˆæ ¼
4. é‡å¤§ãªãƒã‚°ãŒã‚¼ãƒ­

## ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- Week 1: å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- Week 2: çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½
- Week 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- Week 4: éšœå®³å¾©æ—§ãƒ†ã‚¹ãƒˆãƒ»æœ€çµ‚ç¢ºèª

æœ¬è¨ˆç”»ã«åŸºã¥ã„ã¦ã€MT4/MT5çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®å“è³ªã‚’ä¿è¨¼ã—ã€MVPãƒªãƒªãƒ¼ã‚¹ã®æº–å‚™ã‚’å®Œäº†ã•ã›ã¾ã™ã€‚