# ArbitrageAssistant - æ­£ã—ã„Haconiwaè¨­è¨ˆï¼ˆå…¬å¼æ§‹é€ ï¼‰
# Organization CRD â†’ Space CRD â†’ Task CRDs

# ==========================================
# Organization CRD - å°‚é–€å®¶ãƒãƒ¼ãƒ å®šç¾©
# ==========================================
apiVersion: haconiwa.dev/v1
kind: Organization
metadata:
  name: arbitrage-assistant-org
  version: "1.0.0"
spec:
  companyName: "ArbitrageAssistant Development"
  industry: "FinTech Software Development"
  hierarchy:
    CEO: "CEO Arbitrage"
    Directors: ["Backend Director", "Trading Director", "Integration Director", "Frontend Director", "DevOps Director"]
    Specialists: ["GraphQL Specialist", "Arbitrage Specialist", "MT5 Connector Specialist", "React Specialist", "Build Optimization Engineer"]
    Engineers: ["AWS Integration Expert", "Position Manager", "WebSocket Engineer", "Desktop App Engineer", "Quality Assurance Engineer"]
  teams:
    - name: "Backend Architecture Team"
      description: "AWS Amplify Gen2 + GraphQL + userIdãƒ™ãƒ¼ã‚¹æœ€é©åŒ–å°‚é–€éƒ¨é–€"
      roles:
        - name: "Backend Director"
          description: "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è¨­è¨ˆãƒ»å®Ÿè£…ãƒ»æœ€é©åŒ–è²¬ä»»è€…"
        - name: "GraphQL Specialist" 
          description: "GraphQLå®Ÿè£…ãƒ»æœ€é©åŒ–å°‚é–€å®¶"
        - name: "AWS Integration Expert"
          description: "AWS Amplifyçµ±åˆãƒ»Cognitoèªè¨¼å°‚é–€å®¶"
    
    - name: "Trading Systems Team"
      description: "ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»é‡‘èè¨ˆç®—å°‚é–€éƒ¨é–€"
      roles:
        - name: "Trading Director"
          description: "å–å¼•ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ»å®Ÿè£…ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†è²¬ä»»è€…"
        - name: "Arbitrage Specialist"
          description: "ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸è¨ˆç®—ãƒ»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å°‚é–€å®¶"
        - name: "Position Manager"
          description: "ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»çŠ¶æ…‹é·ç§»å°‚é–€å®¶"
    
    - name: "Integration Systems Team"
      description: "MT4/MT5çµ±åˆãƒ»WebSocketé€šä¿¡ãƒ»å¤–éƒ¨APIé€£æºå°‚é–€éƒ¨é–€"
      roles:
        - name: "Integration Director"
          description: "å¤–éƒ¨çµ±åˆã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ»å®Ÿè£…ãƒ»ä¿å®ˆè²¬ä»»è€…"
        - name: "MT5 Connector Specialist"
          description: "MT4/MT5çµ±åˆãƒ»EAé–‹ç™ºå°‚é–€å®¶"
        - name: "WebSocket Engineer"
          description: "WebSocketé€šä¿¡ãƒ»ãƒ—ãƒ­ãƒˆã‚³ãƒ«è¨­è¨ˆå°‚é–€å®¶"
    
    - name: "Frontend Experience Team"
      description: "ç®¡ç†ç”»é¢ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—UIãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å°‚é–€éƒ¨é–€"
      roles:
        - name: "Frontend Director"
          description: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å…¨ä½“è¨­è¨ˆãƒ»UXæœ€é©åŒ–è²¬ä»»è€…"
        - name: "React Specialist"
          description: "Reactãƒ»Next.jsãƒ»UIå®Ÿè£…å°‚é–€å®¶"
        - name: "Desktop App Engineer"
          description: "Tauriãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªå°‚é–€å®¶"
    
    - name: "DevOps & QA Team"
      description: "ã‚¤ãƒ³ãƒ•ãƒ©æœ€é©åŒ–ãƒ»å“è³ªä¿è¨¼ãƒ»CI/CDãƒ»ç›£è¦–å°‚é–€éƒ¨é–€"
      roles:
        - name: "DevOps Director"
          description: "ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»CI/CDãƒ»å“è³ªç®¡ç†è²¬ä»»è€…"
        - name: "Build Optimization Engineer"
          description: "Turborepoãƒ»ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–å°‚é–€å®¶"
        - name: "Quality Assurance Engineer"
          description: "ãƒ†ã‚¹ãƒˆãƒ»å“è³ªä¿è¨¼ãƒ»ç›£è¦–å°‚é–€å®¶"

---
# ==========================================
# Space CRD - é–‹ç™ºç©ºé–“ãƒ»éƒ¨å±‹å®šç¾©
# ==========================================
apiVersion: haconiwa.dev/v1
kind: Space
metadata:
  name: arbitrage-assistant-space
  version: "1.0.0"
spec:
  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼
  securityPolicy:
    requireAuth: true
    allowedPorts: [3000, 8080, 1420, 5173, 4173]  # Next.js, Tauri, Vite
    restrictedPaths: ["node_modules", ".git", ".env*", "*.key", "*.pem"]
    auditLog: true
    maxSessionTime: "8h"
    autoLogout: true
  
  # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
  performanceTargets:
    buildTime: "< 30s"
    lintTime: "< 10s" 
    testCoverage: "> 90%"
    memoryUsage: "< 2GB"
    cpuUsage: "< 80%"
  
  # ã‚¿ã‚¹ã‚¯ãƒ–ãƒ©ãƒ³ãƒç®¡ç†
  branchStrategy:
    patterns: ["feature/*", "bugfix/*", "hotfix/*", "mvp/*", "task/*"]
    isolationLevel: "room"
    autoCleanup: true
    maxBranches: 10
  
  # 6 Windowæ§‹æˆï¼ˆCEO + 5 Directorsï¼‰
  grid: "6x1"
  
  # Roomå®šç¾©ï¼ˆå„Windowã«å¯¾å¿œï¼‰
  rooms:
    - id: "room-ceo"
      name: "ğŸ›ï¸ CEO Executive Office"
      description: "Strategic MVP leadership using parallel development tools"
      agentId: "ceo-arbitrage"
    
    - id: "room-backend"
      name: "ğŸ—„ï¸ Backend Architecture"
      description: "AWS Amplify Gen2 + GraphQL + userIdãƒ™ãƒ¼ã‚¹æœ€é©åŒ–å°‚é–€éƒ¨é–€"
      agentId: "backend-director"
    
    - id: "room-trading"
      name: "âš¡ Trading Systems"
      description: "ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»é‡‘èè¨ˆç®—å°‚é–€éƒ¨é–€"
      agentId: "trading-director"
    
    - id: "room-integration"
      name: "ğŸ”Œ Integration Systems"
      description: "MT4/MT5çµ±åˆãƒ»WebSocketé€šä¿¡ãƒ»å¤–éƒ¨APIé€£æºå°‚é–€éƒ¨é–€"
      agentId: "integration-director"
    
    - id: "room-frontend"
      name: "ğŸ¨ Frontend Experience"
      description: "ç®¡ç†ç”»é¢ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—UIãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å°‚é–€éƒ¨é–€"
      agentId: "frontend-director"
    
    - id: "room-devops"
      name: "ğŸš€ DevOps & QA"
      description: "ã‚¤ãƒ³ãƒ•ãƒ©æœ€é©åŒ–ãƒ»å“è³ªä¿è¨¼ãƒ»CI/CDãƒ»ç›£è¦–å°‚é–€éƒ¨é–€"
      agentId: "devops-director"

  nations:
    - id: arbitrage-nation
      name: "ArbitrageAssistant Nation"
      cities:
        - id: mvp-city
          name: "MVP Development City"
          villages:
            - id: development-village
              name: "Development Village"
              companies:
                - name: arbitrage-assistant
                  basePath: "./"
                  
                  gitRepo:
                    url: "https://github.com/rnrnstar2/ArbitrageAssistant"
                    defaultBranch: "dev"
                    auth: "https"
                  
                  agentDefaults:
                    type: "claude-code"
                    permissions:
                      allow:
                        - "Bash(npm run *)"
                        - "Bash(cd *)"
                        - "Bash(git *)"
                        - "Edit(*)"
                        - "Read(*)"
                        - "Write(*)"
                      deny:
                        - "Bash(rm -rf /)"
                        - "Bash(sudo *)"

---
# ==========================================
# Task CRDs - MVPé–‹ç™ºã‚¿ã‚¹ã‚¯å®šç¾©
# ==========================================
apiVersion: haconiwa.dev/v1
kind: Task
metadata:
  name: mvp-graphql-backend
  version: "1.0.0"
spec:
  id: "task-mvp-graphql-backend"
  title: "MVP GraphQL ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤å®Ÿè£…"
  description: |
    ArbitrageAssistant MVPã®GraphQLãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
    
    ã€å¿…é ˆè¦ä»¶ã€‘
    - Userã€Accountã€Positionã€Actionãƒ¢ãƒ‡ãƒ«ã®åŸºæœ¬CRUD
    - userIdãƒ™ãƒ¼ã‚¹GSIè¨­å®šï¼ˆé«˜é€Ÿæ¤œç´¢ï¼‰
    - GraphQL Subscriptionï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼‰
    - Cognitoèªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
    
    ã€æˆæœç‰©ã€‘
    - packages/shared-backend/amplify/data/resource.ts å®Œå…¨å®Ÿè£…
    - åŸºæœ¬GraphQLã‚¹ã‚­ãƒ¼ãƒå®šç¾©
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ç¢ºèª
    
    ã€åˆ¶ç´„äº‹é …ã€‘
    âŒ è¤‡é›‘ãªãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆã¯å®Ÿè£…ç¦æ­¢
    âŒ é«˜åº¦ãªã‚¯ã‚¨ãƒªæœ€é©åŒ–ã¯å¾Œå›ã—
    âœ… åŸºæœ¬çš„ãªCRUDæ“ä½œã®ç¢ºå®Ÿãªå‹•ä½œã‚’æœ€å„ªå…ˆ
  assignee: "backend-director"
  priority: "high"
  branch: "feature/01_mvp_graphql_backend"
  defaultBranch: "dev"
  worktree: true
  spaceRef: "arbitrage-assistant-space"
  room: "room-backend"

---
apiVersion: haconiwa.dev/v1
kind: Task
metadata:
  name: mvp-arbitrage-engine
  version: "1.0.0"
spec:
  id: "task-mvp-arbitrage-engine"
  title: "MVP ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³åŸºç›¤å®Ÿè£…"
  description: |
    ArbitrageAssistant MVPã®ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³åŸºç›¤ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
    
    ã€å¿…é ˆè¦ä»¶ã€‘
    - PENDINGâ†’OPENINGâ†’OPENçŠ¶æ…‹é·ç§»ã®ç¢ºå®Ÿå®Ÿè¡Œ
    - é‡‘èè¨ˆç®—ç²¾åº¦å°æ•°ç‚¹5æ¡ç¨‹åº¦
    - åŸºæœ¬ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
    - ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
    
    ã€æˆæœç‰©ã€‘
    - apps/hedge-system/lib/hedge-system-core.ts åŸºæœ¬å®Ÿè£…
    - apps/hedge-system/lib/position-execution.ts çŠ¶æ…‹ç®¡ç†
    - ã‚¢ãƒ¼ãƒ“ãƒˆãƒ©ãƒ¼ã‚¸è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
    
    ã€åˆ¶ç´„äº‹é …ã€‘
    âŒ è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…ã¯ç¦æ­¢
    âŒ é«˜åº¦ãªæœ€é©åŒ–ã¯å¾Œå›ã—
    âœ… ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹åŸºæœ¬å–å¼•æ©Ÿèƒ½ã‚’æœ€å„ªå…ˆ
  assignee: "trading-director"
  priority: "high"
  branch: "feature/02_mvp_arbitrage_engine"
  defaultBranch: "dev"
  worktree: true
  spaceRef: "arbitrage-assistant-space"
  room: "room-trading"

---
apiVersion: haconiwa.dev/v1
kind: Task
metadata:
  name: mvp-mt5-integration
  version: "1.0.0"
spec:
  id: "task-mvp-mt5-integration"
  title: "MVP MT5çµ±åˆã‚·ã‚¹ãƒ†ãƒ åŸºç›¤å®Ÿè£…"
  description: |
    ArbitrageAssistant MVPã®MT5çµ±åˆã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
    
    ã€å¿…é ˆè¦ä»¶ã€‘
    - WebSocketé€šä¿¡ä½é…å»¶å®Ÿç¾
    - MT5 EAåŸºæœ¬æ©Ÿèƒ½å®Ÿè£…
    - ã‚¨ãƒ©ãƒ¼å›å¾©æ©Ÿèƒ½
    - é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«è¨­è¨ˆ
    
    ã€æˆæœç‰©ã€‘
    - ea/HedgeSystemConnector.mq5 åŸºæœ¬EA
    - ea/websocket-dll/HedgeSystemWebSocket.cpp WebSocketå®Ÿè£…
    - apps/hedge-system/lib/websocket-server.ts ã‚µãƒ¼ãƒãƒ¼å´
    
    ã€åˆ¶ç´„äº‹é …ã€‘
    âŒ è¤‡é›‘ãªé€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…ã¯ç¦æ­¢
    âŒ é«˜åº¦ãªæœ€é©åŒ–ã¯å¾Œå›ã—
    âœ… ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹åŸºæœ¬é€šä¿¡æ©Ÿèƒ½ã‚’æœ€å„ªå…ˆ
  assignee: "integration-director"
  priority: "high"
  branch: "feature/03_mvp_mt5_integration"
  defaultBranch: "dev"
  worktree: true
  spaceRef: "arbitrage-assistant-space"
  room: "room-integration"

---
apiVersion: haconiwa.dev/v1
kind: Task
metadata:
  name: mvp-admin-dashboard
  version: "1.0.0"
spec:
  id: "task-mvp-admin-dashboard"
  title: "MVP ç®¡ç†ç”»é¢åŸºç›¤å®Ÿè£…"
  description: |
    ArbitrageAssistant MVPã®ç®¡ç†ç”»é¢åŸºç›¤ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
    
    ã€å¿…é ˆè¦ä»¶ã€‘
    - ãƒã‚¸ã‚·ãƒ§ãƒ³ãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤º
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°æ©Ÿèƒ½
    - é«˜é€ŸåˆæœŸè¡¨ç¤º
    - ç›´æ„Ÿçš„ãªUIè¨­è¨ˆ
    
    ã€æˆæœç‰©ã€‘
    - apps/admin/app/dashboard/page.tsx ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
    - apps/admin/features/accounts/ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
    - apps/admin/features/positions/ ãƒã‚¸ã‚·ãƒ§ãƒ³è¡¨ç¤º
    
    ã€åˆ¶ç´„äº‹é …ã€‘
    âŒ è£…é£¾çš„ãªUIè¦ç´ å®Ÿè£…ã¯ç¦æ­¢
    âŒ è¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯å¾Œå›ã—
    âœ… ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹åŸºæœ¬è¡¨ç¤ºæ©Ÿèƒ½ã‚’æœ€å„ªå…ˆ
  assignee: "frontend-director"
  priority: "high"
  branch: "feature/04_mvp_admin_dashboard"
  defaultBranch: "dev"
  worktree: true
  spaceRef: "arbitrage-assistant-space"
  room: "room-frontend"

---
apiVersion: haconiwa.dev/v1
kind: Task
metadata:
  name: mvp-build-optimization
  version: "1.0.0"
spec:
  id: "task-mvp-build-optimization"
  title: "MVP ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–ãƒ»å“è³ªä¿è¨¼å®Ÿè£…"
  description: |
    ArbitrageAssistant MVPã®ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–ã¨å“è³ªä¿è¨¼ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
    
    ã€å¿…é ˆè¦ä»¶ã€‘
    - Turborepoè¨­å®šæœ€é©åŒ–
    - ESLint 0 warningså“è³ªåŸºæº–ç¶­æŒ
    - GitHub Actions CI/CDè¨­å®š
    - ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡åŒ–
    
    ã€æˆæœç‰©ã€‘
    - turbo.json æœ€é©åŒ–è¨­å®š
    - .github/workflows/ CI/CDè¨­å®š
    - å“è³ªãƒã‚§ãƒƒã‚¯è‡ªå‹•åŒ–
    
    ã€åˆ¶ç´„äº‹é …ã€‘
    âŒ è¤‡é›‘ãªæœ€é©åŒ–è¨­å®šã¯å®Ÿè£…ç¦æ­¢
    âŒ é«˜åº¦ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã¯å¾Œå›ã—
    âœ… ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹åŸºæœ¬ãƒ“ãƒ«ãƒ‰è¨­å®šã‚’æœ€å„ªå…ˆ
  assignee: "devops-director"
  priority: "medium"
  branch: "enhancement/05_mvp_build_optimization"
  defaultBranch: "dev"
  worktree: true
  spaceRef: "arbitrage-assistant-space"
  room: "room-devops"