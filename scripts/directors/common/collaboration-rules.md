# コラボレーションルール - 高精度連携

## 🎯 基本方針：コラボレーション >> YOLO

### ❌ YOLOモード（避けるべき）
- 推測で実装進行
- 要件不明のまま作業開始
- 依存関係無視の独断実装
- 影響範囲考慮なしの変更

### ✅ コラボレーションモード（推奨）
- インターセプト&再プロンプト方式
- 要件明確化優先
- 依存関係事前確認
- 影響範囲分析後実装

## 📋 再プロンプトが必要な場面

### 1. 要件が曖昧な場合
```
問題例：
- 「このバグを修正して」（具体的な症状・原因不明）
- 「パフォーマンスを改善して」（目標・測定基準不明）
- 「UIを良くして」（どこを・どのように不明）

対処法：
"要件を明確化させてください：
- 具体的な問題症状は？
- 期待する動作は？
- 成功基準は？
- 優先度・期限は？"
```

### 2. 依存関係が不明な場合
```
問題例：
- 他チームの実装状況不明
- 外部API仕様変更の可能性
- データベーススキーマ影響範囲不明

対処法：
"依存関係を確認させてください：
- 関連する他チーム実装状況は？
- 外部システム仕様に変更はないか？
- データ移行・互換性の考慮は必要か？"
```

### 3. 技術選択肢が複数ある場合
```
問題例：
- 複数のライブラリ・フレームワーク候補
- アーキテクチャパターンの選択
- パフォーマンス vs 開発効率のトレードオフ

対処法：
"技術選択の判断基準を確認させてください：
- パフォーマンス要件は？
- 保守性・拡張性の重要度は？
- チーム技術スキルとの適合性は？
- 長期的な技術戦略との整合性は？"
```

### 4. 影響範囲が広い場合
```
問題例：
- 複数アプリケーション横断の変更
- 共通ライブラリ・コンポーネント変更
- データベーススキーマ変更

対処法：
"影響範囲を分析させてください：
- 影響を受けるシステム・コンポーネントは？
- 互換性維持の必要性は？
- 段階的移行の計画は？
- テスト・検証計画は？"
```

## 🔄 階層間コラボレーション

### CEO → Director
```
適切な指示例：
"Backend Directorへ：
- 目的：userIdベース最適化によるGraphQLパフォーマンス向上
- 要件：クエリレスポンス時間50%短縮
- 制約：既存データ互換性維持
- 期限：今週末まで
- 成功基準：ベンチマークテスト通過"

不適切な指示例：
"GraphQLを速くして"（曖昧・測定不可能）
```

### Director → Specialist
```
適切な指示例：
"amplify-gen2-specialistへ：
- 具体的タスク：data/resource.tsのUser型にuserIdベースindex追加
- 技術要件：@primaryKey、@index設定
- 参照資料：MVPシステム設計.md 2-4節
- 完了条件：GraphQLスキーマ生成成功・型チェック通過
- 報告内容：実装結果・パフォーマンス改善数値"

不適切な指示例：
"データベースを最適化して"（抽象的）
```

## 🚨 インターセプト・再プロンプト例

### 場面1：曖昧な要件
```
受信："バグを修正して"

再プロンプト：
"要件を明確化させてください：
1. どのような問題が発生していますか？（エラーメッセージ、異常動作など）
2. 再現手順を教えてください
3. 期待する正常動作は何ですか？
4. 影響範囲（ユーザー、機能）はどの程度ですか？
5. 緊急度・優先度はどの程度ですか？

この情報をいただいてから、詳細な修正計画を作成します。"
```

### 場面2：技術選択迷い
```
受信："この機能を実装して」

再プロンプト：
"実装方針を決定するために確認させてください：
1. パフォーマンス要件（レスポンス時間、スループットなど）
2. スケーラビリティ要件（ユーザー数、データ量の想定）
3. 保守性・拡張性の重要度
4. 既存システムとの統合制約
5. 開発・運用リソースの制約

これらを考慮して最適な技術選択と詳細実装計画を提案します。"
```

## 📞 エスカレーション手順

### Level 1: Specialist → Director
```
条件：
- 技術的課題で解決策が複数ある
- 他Specialistとの連携が必要
- 要件の解釈に迷いがある

手順：
1. 課題の具体的説明
2. 調査済み選択肢の列挙
3. 推奨案と理由
4. Director判断を要求
```

### Level 2: Director → CEO
```
条件：
- 複数部門への影響
- アーキテクチャレベルの判断
- リソース・スケジュール調整

手順：
1. 部門間影響の分析
2. 技術的・事業的リスク評価  
3. 複数シナリオの提示
4. CEO戦略判断を要求
```

## 🤝 効果的なコラボレーション技法

### 1. 5W1H明確化
```
What：何を実装・修正するか
Why：なぜ必要か（ビジネス価値・技術的理由）
Who：誰が担当するか（役割分担）
When：いつまでに（スケジュール）
Where：どこに影響するか（範囲）
How：どのように実装するか（技術手法）
```

### 2. 仮定明示法
```
「以下の仮定で進めますが、間違いがあれば修正してください：
- 仮定1：現在のユーザー数は1000人以下
- 仮定2：データ移行時間は30分以内で許容
- 仮定3：既存APIの互換性維持は必須
これらの仮定が正しければ、実装方針Aを推奨します。」
```

### 3. リスク先出し法
```
「この実装には以下のリスクがあります：
- 技術リスク：新ライブラリの学習コスト
- 運用リスク：監視項目の追加が必要
- ビジネスリスク：一時的なパフォーマンス低下
これらのリスク対策を含めて進めてよろしいですか？」
```

## 📊 コラボレーション品質指標

### 測定項目
- 再プロンプト率：< 20%（要件明確度）
- エスカレーション率：< 10%（問題解決能力）
- 手戻り率：< 5%（実装精度）
- 部門間連携効率：> 90%（コミュニケーション品質）

### 改善アクション
- 再プロンプト率高：要件明確化プロセス強化
- エスカレーション率高：権限・判断基準見直し
- 手戻り率高：事前レビュー・検証強化
- 連携効率低：コミュニケーション手法改善

**高精度コラボレーションで品質・効率・満足度を最大化してください。**